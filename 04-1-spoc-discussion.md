# 04-1-spoc-discussion

计44 黄锐皓 2014011385

## 视频相关思考题

### 8.1 虚拟存储的需求背景

1. 寄存器、高速缓存、内存、外存的访问特征？

储存容量递增，成本递减，访问时间递增。

2. 如何理解计算机中的存储层次结构所的理想状态是“均衡繁忙”状态？

均衡繁忙是指，各种存储介质都处理繁忙状态，但又不构成系统瓶颈。

3. 在你写程序时遇到过内存不够的情况吗？尝试过什么解决方法？

比如数组排序、动态链接库。

### 8.2 覆盖和交换

1. 什么是覆盖技术？使用覆盖技术的程序开发者的主要工作是什么？

覆盖：划分程序功能模块、不会同时执行的模块共享同一块内存。
程序员的任务：模块划分、确定模块的共享关系。

2. 什么是交换技术？覆盖与交换有什么不同？

交换：作为一个整体的进程地址空间的换入和换出。

覆盖：通过切块，解决进程空间大于物理内存的问题；交换：通过进程整体交换，解决高优先级进程运行需要的内存空间不够问题。

3. 覆盖和交换技术在现代计算机系统中还有需要吗？可能用在什么地方？

在Linux下可使用lsmod或modinfo命令查看。

4. 如何分析内核模块间的依赖关系？

代码分析或者使用gdb等工具进行动态函数调用分析。

5. 如何获取内核模块间的函数调用列表？

通过编译器和文档。

### 8.3 局部性原理

1. 什么是时间局部性、空间局部性和分支局部性？

时间局部性：如果一个信息项正在被访问，那么短时间内它很可能被再次访问。 

空间局部性：在不久后要用到的信息很可能与正在使用的信息在空间地址上临近。

分支局部性：程序执行的时候访问数据块一般是顺序访问或者隔一个空间地按序访问(if-else)。

2. 如何提高程序执行时的局部性特征？

将大块数据一次性读写，按顺序访问数据,etc.

3. 排序算法的局部性特征？

插入排序总是按顺序扫描数据，且经常反复访问前面部分数据。

### 8.4 虚拟存储概念

1. 什么是虚拟存储？它与覆盖和交换的区别是什么？它有什么好处和挑战？

虚拟存储：只把当前指令执行所需要的部分进程地址空间内容放在物理内存中。

虚拟存储的特征：不连续性、大用户空间、部分交换。

2. 虚拟存储需要什么样的支持技术？

硬件：地址转换。

操作系统：置换算法（换入和换出的区域选择）。

### 8.5 虚拟页式存储

1. 什么是虚拟页式存储？缺页中断处理的功能是什么？

虚拟页式存储是指在页式存储管理的基础上，增加请求调页和页面置换的功能，缺页中断处理的功能是请求调页和页面置换。

2. 为了支持虚拟页式存储的实现，页表项有什么修改？

需要增加驻留位、修改位、访问位、保护位等。

3. 页式存储和虚拟页式存储的区别是什么？

页式存储是指操作系统以固定大小的页为单位进行内存的分配和管理。虚拟页式存储是指通过地址转换和页面置换使得应用程序能够共享地址空间，都认为自己独占了内存。通过虚拟页式存储提供比实际物理存储更大的内存空间。

### 8.6 缺页异常

1. 缺页异常的处理流程？

引用页表项； 页面不在内存引发缺页异常； 通过中断进入内核 在外存中查找需要访问的页面备份； 页面换入； 页表项修改； 重新执行导致缺页异常的指令。

2. 虚拟页式存储管理中有效存储访问时间是如何计算的？

EAT = 访存时间 * (1-p) + 缺页异常处理时间 * 缺页率p。